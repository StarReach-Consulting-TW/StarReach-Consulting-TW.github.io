<!doctype html>
<html lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>é åŒ—æ˜Ÿç¿</title>
    <style>
        :root{
         --bg:#f5f7fb; --card:#ffffff; --muted:#7a7f86; --accent:#2b8cff; --danger:#ff6b6b;
         font-family: "Noto Sans TC", "Helvetica Neue", Arial, sans-serif;
        }
        body{margin:0;background:linear-gradient(180deg,#eef3ff 0%,var(--bg) 100%);color:#111;}
        header{background:#1f2a44;color:#fff;padding:20px 18px;display:flex;align-items:center;gap:14px;}
        header .logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#ffd166,#ef476f);display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 4px 14px rgba(0,0,0,.12)}
        header h1{margin:0;font-size:20px;letter-spacing:1px}
        .container{max-width:980px;margin:18px auto;padding:0 16px;}
        .toolbar{display:flex;gap:12px;align-items:center;margin:12px 0}
        .search{flex:1;display:flex;gap:8px}
        input[type="search"]{flex:1;padding:10px 12px;border-radius:8px;border:1px solid #dee6f5;background:#fff}
        button{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
        .layout{display:grid;grid-template-columns:320px 1fr;gap:18px}
        .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(17,24,39,.06)}
        .group-info h2{margin:0 0 6px 0}
        .badge{display:inline-block;padding:6px 8px;border-radius:999px;background:#eef5ff;color:var(--accent);font-weight:600;font-size:13px}
        .new-post{display:flex;gap:10px;align-items:flex-start}
        .avatar{width:44px;height:44px;border-radius:8px;background:#eee;display:flex;align-items:center;justify-content:center;font-weight:700;color:#666}
        textarea{width:100%;min-height:78px;padding:10px;border-radius:10px;border:1px solid #e6edf8;resize:vertical}
        .meta{display:flex;gap:8px;align-items:center;margin-top:8px}
        .posts{display:flex;flex-direction:column;gap:12px}
        .post{padding:12px;border-radius:10px;border:1px solid #f0f3fb;background:linear-gradient(180deg,#fff,#fbfdff)}
        .post .top{display:flex;gap:10px;align-items:center}
        .post .who{font-weight:700}
        .post .time{color:var(--muted);font-size:13px;margin-left:6px}
        .post .content{margin:8px 0;color:#222;white-space:pre-wrap}
        .actions{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:14px}
        .actions button{background:transparent;border:0;color:var(--muted);cursor:pointer;padding:6px;border-radius:8px}
        .like.active{color:var(--accent);font-weight:700}
        .reply-list{margin-top:8px;padding-left:48px;display:flex;flex-direction:column;gap:6px}
        .reply{background:#f7f9ff;border-radius:8px;padding:8px;font-size:14px;color:#333}
        footer{margin:26px 0 60px 0;color:var(--muted);text-align:center}
        @media(max-width:860px){.layout{grid-template-columns:1fr} .toolbar{flex-direction:column;align-items:stretch}}
    </style>
</head>

<body>
    <header>
        <div class="logo">æ˜Ÿ</div>
        <div>
            <h1>é åŒ—æ˜Ÿç¿</h1>
            <div style="font-size:13px;color:rgba(255,255,255,.85)">åŒ¿åç™¼æ´©ã€è·å ´å¿ƒå¾—ã€è¾¦å…¬å®¤å°åŠ‡å ´</div>
        </div>
    </header>

    <main class="container">
        <div class="toolbar">
            <div class="search">
                <input id="q" type="search" placeholder="æœå°‹è²¼æ–‡æˆ–åŒäº‹..." />
                <button id="btnSearch">æœå°‹</button>
            </div>
            <button id="btnNew">ç™¼è¡¨åŒ¿ååæ§½</button>
        </div>

        <div class="layout">
            <aside>
                <div class="card group-info">
                    <h2>ç¤¾åœ˜ç°¡ä»‹</h2>
                    <div class="badge">åŒ¿åç¤¾åœ˜</div>
                    <p style="color:var(--muted);margin-top:10px">æ­¡è¿æŠŠè·å ´ä¸­æƒ³èªªçš„è©±ã€å¥½ç¬‘çš„æ—¥å¸¸ä¸Ÿä¸Šä¾†â€”ä¿æŒç¦®è²Œä½†èª å¯¦ã€‚</p>
                </div>

                <div class="card" style="margin-top:12px">
                    <h3 style="margin:0 0 8px 0">ç†±é–€æ¨™ç±¤</h3>
                    <div style="display:flex;flex-wrap:wrap;gap:8px">
                        <span class="badge">#æ‘¸é­š</span>
                        <span class="badge">#æœƒè­°åœ°ç„</span>
                        <span class="badge">#åŒ¿ååæ§½</span>
                        <span class="badge">#è³‡è¨Šæ–·å±¤</span>
                    </div>
                </div>
            </aside>

            <section>
                <div class="card">
                    <div class="new-post">
                        <div class="avatar">ä½ </div>
                        <div style="flex:1">
                            <textarea id="postText" placeholder="èªªå‡ºä½ å¿ƒè£¡çš„é‚£å¥é åŒ—â€¦ï¼ˆåŒ¿åï¼‰"></textarea>
                            <div class="meta">
                                <label style="color:var(--muted);font-size:13px">åˆ†é¡ï¼š
                                    <select id="category" style="margin-left:8px;padding:6px;border-radius:8px;border:1px solid #e6edf8">
                                        <option>æ—¥å¸¸</option>
                                        <option>æœƒè­°</option>
                                        <option>åŒäº‹</option>
                                        <option>å…¶ä»–</option>
                                    </select>
                                </label>
                                <div style="flex:1"></div>
                                <button id="postBtn">ç™¼ä½ˆ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="posts" class="posts" style="margin-top:12px">
                    </div>

            </section>
        </div>

        <footer>é åŒ—æ˜Ÿç¿ Â· åªåšåŒ¿åç™¼æ´©ï¼Œä¸è² ä»»ä½•æ³•å¾‹è²¬ä»»ï¼ˆç©ç¬‘è©±å‹¿ç•¶çœŸï¼‰</footer>
    </main>

    <script>
        // ç¯„ä¾‹è²¼æ–‡ï¼ˆå–è‡ªå…ˆå‰ç²¾é¸åæ§½ï¼‰
        const sample = [
         {who:'é åŒ—æ˜Ÿç¿ 9486', text:'æˆ‘å€‘éƒ¨é–€ä¸æ˜¯äººå°‘ï¼Œæ˜¯å› ç‚ºæœ‰äº›äººä¸€å¤©åªå‡ºç¾äºŒååˆ†é˜ï¼Œæ‰€ä»¥çœ‹èµ·ä¾†åƒå¤šã€‚', time:'å‰›å‰›', likes:3, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9485', text:'æˆ‘ä¸æ˜¯ä¸æƒ³é–‹æœƒï¼Œæ˜¯æˆ‘æ‡·ç–‘ä¸€æ—¦é–‹å§‹ï¼Œä»–æœƒè¬›åˆ°é€£æˆ‘çš„éˆé­‚éƒ½è¦åŠ ç­ã€‚', time:'5åˆ†é˜å‰', likes:5, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9484', text:'æŸäººæ¯æ¬¡èªªã€Œæˆ‘ä¾†è™•ç†ã€éƒ½åƒè©é¨™ç°¡è¨Šï¼Œæˆ‘éƒ½æœƒå…ˆæˆªåœ–å­˜è­‰ã€‚', time:'10åˆ†é˜å‰', likes:6, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9483', text:'ä»–é‚£å€‹ç¬‘å®¹å–”â€¦â€¦ä¸€çœ‹å°±æ˜¯ã€Œæƒ³æ‹œè¨—ä½ å¹«å¿™ä½†è£æˆæ²’äº‹ã€çš„é å…†ã€‚', time:'15åˆ†é˜å‰', likes:2, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9482', text:'æˆ‘æœ€å®³æ€•çš„ä¸æ˜¯å·¥ä½œé‡ï¼Œè€Œæ˜¯æœ‰äººçªç„¶èªªã€Œç­‰ä¸€ä¸‹ï¼Œæˆ‘æƒ³åˆ°ä¸€å€‹æ›´å¥½çš„åšæ³•ã€ã€‚', time:'20åˆ†é˜å‰', likes:4, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9481', text:'æˆ‘å€‘é–‹ç™¼éƒ¨çš„ç²¾ç¥åœ–é¨°å°±æ˜¯ï¼šä¸ç®¡åšå°åšéŒ¯ï¼Œå…ˆè¢«ç½µå†èªªã€‚', time:'30åˆ†é˜å‰', likes:1, replies:[]},
         {who:'é åŒ—æ˜Ÿç¿ 9480', text:'æœ‰äº›åŒäº‹åœ¨å…¬å¸æ´»å¾—åƒç¨€æœ‰å‹•ç‰©ï¼Œä¸‰å€‹æœˆçœ‹åˆ°ä¸€æ¬¡é‚„æœƒæ‡·ç–‘æ˜¯å¹»è¦ºã€‚', time:'æ˜¨å¤©', likes:7, replies:[]}
        ];
    
        // -----------------------------------------------------------------
        // ğŸŒŸ ä¿®æ”¹é» 1: è¨­å®šæµæ°´è™Ÿèµ·å§‹å€¼
        // -----------------------------------------------------------------
        let nextPostId = 9487;

        const postsEl = document.getElementById('posts');
        const qEl = document.getElementById('q');
    
        function renderPosts(list){
         postsEl.innerHTML = '';
         list.forEach((p, idx)=>{
           const div = document.createElement('div');
           div.className = 'post';
           // -----------------------------------------------------------------
           // ğŸŒŸ ä¿®æ”¹é» 2: æ¸²æŸ“æ™‚æª¢æŸ¥ isOwner å±¬æ€§ï¼Œæ±ºå®šæ˜¯å¦é¡¯ç¤ºåˆªé™¤æŒ‰éˆ•
           // ä¸¦ä¸”å° p.who ä¹Ÿä½¿ç”¨ escapeHtml å¢åŠ å®‰å…¨æ€§
           // -----------------------------------------------------------------
           div.innerHTML = `
             <div class="top"><div class="avatar" style="width:36px;height:36px;border-radius:6px">#</div>
               <div>
                 <div><span class="who">${escapeHtml(p.who)}</span><span class="time"> Â· ${p.time}</span></div>
               </div>
             </div>
             <div class="content">${escapeHtml(p.text)}</div>
             <div class="actions">
               <button class="like" data-i="${idx}">â¤ <span class="count">${p.likes}</span></button>
               <button class="replyBtn" data-i="${idx}">ğŸ’¬ å›è¦†</button>
               <button class="share" data-i="${idx}">â¤´ åˆ†äº«</button>
               ${p.isOwner ? `<button class="deleteBtn" data-i="${idx}" style="color:var(--danger);margin-left:auto;font-weight:600;">ğŸ—‘ï¸ åˆªé™¤</button>` : ''}
             </div>
             <div class="reply-list" id="replies-${idx}"></div>
           `;
           postsEl.appendChild(div);
         });
         // ğŸŒŸ ä¿®æ”¹é» 3: å°‡ list å‚³å…¥ attachEventsï¼Œä»¥ä¾¿åˆªé™¤æ™‚èƒ½æ­£ç¢ºæ“ä½œ
         attachEvents(list);
        }
    
        // ğŸŒŸ ä¿®æ”¹é» 4: attachEvents æ¥æ”¶ list åƒæ•¸ï¼Œä¸¦æ–°å¢åˆªé™¤äº‹ä»¶
        function attachEvents(list){
         document.querySelectorAll('.like').forEach(btn=>{
           btn.onclick = ()=>{
             const i = btn.dataset.i;
             // æ³¨æ„ï¼šæ­¤è™•ä¿®æ”¹ list[i].likes ä»å¯èƒ½å› ç‚ºæœå°‹éæ¿¾è€Œèˆ‡ sample ä¸åŒæ­¥
             // æ›´å¥½çš„åšæ³•æ˜¯æ“ä½œ sampleï¼Œä½†æ­¤è™•ç‚ºæ±‚ç°¡å–®ï¼Œæš«æ™‚ä¿ç•™
             // **æ›´æ–°**ï¼šç‚ºé¿å… bugï¼Œæˆ‘å€‘å‡è¨­é»è®šä¸éœ€åŒæ­¥å› sample
             list[i].likes++; // æ“ä½œç•¶å‰åˆ—è¡¨
             btn.querySelector('.count').textContent = list[i].likes;
             btn.classList.add('active');
           };
         });
         document.querySelectorAll('.replyBtn').forEach(b=>{
           b.onclick = ()=>{
             const i = b.dataset.i;
             const r = prompt('åŒ¿åå›è¦†ï¼š');
             if(r) {
               // åŒä¸Šï¼Œæ“ä½œ list (å¯èƒ½æ˜¯ sample æˆ– filtered)
               list[i].replies.push(r); 
               renderReply(i, list); // å‚³å…¥ list
             }
           }
         });
         document.querySelectorAll('.share').forEach(b=>{
           b.onclick = ()=>alert('åˆ†äº«åŠŸèƒ½åƒ…ç¤ºç¯„ç”¨ï¼ˆæœ¬åœ°ï¼‰');
         });

         // ğŸŒŸ ä¿®æ”¹é» 5: æ–°å¢åˆªé™¤æŒ‰éˆ•çš„äº‹ä»¶ç¶å®š
         document.querySelectorAll('.deleteBtn').forEach(btn => {
            btn.onclick = () => {
                const i = btn.dataset.i; // é€™æ˜¯ list (å¯èƒ½æ˜¯ sample æˆ– filtered) ä¸­çš„ index
                
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å‰‡è²¼æ–‡å—ï¼Ÿ')) {
                    const postToDelete = list[i];
                    
                    // é—œéµï¼šæˆ‘å€‘å¿…é ˆå¾ 'sample' (åŸå§‹è³‡æ–™) ä¸­æ‰¾åˆ°ä¸¦åˆªé™¤
                    const originalIndex = sample.findIndex(p => p === postToDelete);
                    if (originalIndex > -1) {
                        sample.splice(originalIndex, 1);
                    }
                    
                    // åˆªé™¤å¾Œï¼Œæ¸…é™¤æœå°‹æ¢ä»¶ä¸¦é‡æ–°æ¸²æŸ“å®Œæ•´çš„ sample åˆ—è¡¨
                    qEl.value = '';
                    renderPosts(sample);
                }
            }
        });
        }
    
        // ä¿®æ”¹ renderReply ä»¥æ¥æ”¶ list
        function renderReply(i, list){
         const container = document.getElementById('replies-'+i);
         container.innerHTML = '';
         // ä½¿ç”¨å‚³å…¥çš„ list ä¾†æ¸²æŸ“å›è¦†
         list[i].replies.forEach(r=>{
           const el = document.createElement('div');
           el.className = 'reply';
           el.textContent = r; // textContent æœƒè‡ªå‹•è·³è„« HTMLï¼Œè¼ƒå®‰å…¨
           container.appendChild(el);
         });
        }
    
        // escape
        function escapeHtml(s){ return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    
        // init
        renderPosts(sample);
    
        // -----------------------------------------------------------------
        // ğŸŒŸ ä¿®æ”¹é» 6: ä¿®æ”¹ç™¼æ–‡é‚è¼¯
        // -----------------------------------------------------------------
        document.getElementById('postBtn').onclick = ()=>{
         const txt = document.getElementById('postText').value.trim();
         if(!txt){ alert('è«‹è¼¸å…¥å…§å®¹'); return; }

         // å»ºç«‹æ–°è²¼æ–‡ç‰©ä»¶
         const newPost = {
            who: 'é åŒ—æ˜Ÿç¿ ' + nextPostId, // ä½¿ç”¨æµæ°´è™Ÿ
            text: txt, 
            time: 'å‰›å‰›', 
            likes: 0, 
            replies: [], 
            isOwner: true // æ¨™è¨˜ç‚ºä½¿ç”¨è€…è‡ªå·±çš„è²¼æ–‡
         };
         nextPostId++; // æµæ°´è™Ÿéå¢

         sample.unshift(newPost); // åŠ åˆ°è³‡æ–™é™£åˆ—æœ€å‰é¢
         document.getElementById('postText').value='';
         
         // ç™¼æ–‡å¾Œï¼Œæ¸…ç©ºæœå°‹ä¸¦æ¸²æŸ“å®Œæ•´åˆ—è¡¨
         qEl.value = '';
         renderPosts(sample);
        };
    
        // æ–°å¢è¡¨å–®å¿«é€Ÿéµ
        document.getElementById('btnNew').onclick = ()=>document.getElementById('postText').focus();
    
        // æœå°‹ï¼ˆç°¡å–®ï¼‰
        document.getElementById('btnSearch').onclick = ()=>{
         const q = qEl.value.trim().toLowerCase();
         if(!q){ renderPosts(sample); return; }
         const filtered = sample.filter(p=>p.text.toLowerCase().includes(q) || p.who.toLowerCase().includes(q));
         renderPosts(filtered);
        };
    
        // Enter æœå°‹
        qEl.addEventListener('keydown',(e)=>{ if(e.key==='Enter') document.getElementById('btnSearch').click(); });
    </script>
</body>

</html>
